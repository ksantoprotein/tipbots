# Python Library for TipBots

# Documentation

Основное сердце ботов это библиотека Menu из телеграмм библиотеки. Она позволяет вам конструировать чат диалог с ботом посредством кнопочек и реакций на них. Бот запоминает состояние каждого юнита и даже если вы перезапустите бота диалог продолжится с последней точки.

В основе лежит файл menu.py в котором прописывается необходимая информация.

![](https://i.imgur.com/tCmEpO8.png)

Так в словаре menu перечисляются уровни диалога с ботом (start, menu, setting) - это идентификаторы куда необходимо перейти в последствии. К примеру после start в поле action прописываются три кнопки (label) и в конце обозначаются to_level - на какой уровень диалога в последствии боту необходимо перейти. Регулировать количество кнопок можно просто добавлением записей в списке action. Если кнопок слишком много то вы можете расставить перенос кнопой на следующие строчки параметром row. Если он True, то следующие кнопки будут располагаться на след строке в меню телеграмм бота. 

В поле label обозначается имя кнопки для удобства их можно выделить в отдельные переменные, на примере back. Это словарь в котором один из ключей это "label". Удобно редактировать и менять так как кнопка возврата (Back) используется постоянно. Следующий ключ это message - указываете сообщения которое выдаст бот юниту при нажатии на выбранную кнопку. Библиотека позволяет поддерживать любое кол-во языков, поэтому в переменной back есть ключ message который содержит в себе и русский вариант (Russian) и английский (English), при желании бот может переключаться между языками.

Таким образом используя файл menu.py вы можете редактировать menu как вам угодно создавая и удаляя кнопки и выстраивая логику перехода от уровня к уровню. Старайтесь делать название уровней осмысленно (а не 1 2 3 4 5), чтобы не запутываться далее.

К сожалению это часть так называемой статики, только шаблоны и каркас. Так как при нажатии кнопок или введения каких-то сообщений боту бот должен как то реагировать, то это прописывается отдельно, при этом вы сами указываете когда необходимо выполнить что-то еще боту помимо перехода по каркасу который вложен в класс Menu.

В теле самого бота необходимо исполнить два момента.

Первый это прописать все активные события исходя из названий прописанных вами уровней диалога.

![](https://i.imgur.com/zDVNlUB.png)

Первые строчки определяют поведение бота когда происходит личная или групповая переписка, прямое сообщение или ответ на итд итд

а в переменную self.commands грузится поведение бота в тех или иных ситуациях.

К примеру ключ help:Intro указывает что необходимо выполнить когда юнит нажмет кнопку Intro в уровне диалога help. А функция self.help_intro как раз получит управление (при этом текст message боту будет как раз Intro). Если же просто указать уровень без двоеточия, к примеру golosreg - это значит что после того как юнит что то введет (отличное от нажатия кнопок) то исполится функция self.golosreg в message которого будет передан тот самы вводимый текст. 

Другими словами бот отслеживает действия юнита и если это кнопки то он проверяет нужно ли что-то еще выполнить по активации кнопки или можно просто последовать на след уровень, так же отслеживает было ли что-то введено конкретное или просто нажата кнопка на переход.

И после того как вы прописали команды в каркас кнопок и диалогов необходимо провести инициализацию класса Menu

```python=
self.bot_menu = Menu(menu.menu, self.commands, self.tg)
```

Первое это каркас из кнопок и переходов, второе это активные действия бота, а второе собственно сама оболочка бота с необходимым внутренними командами. (Можно даже несколько ботов одновременно запустить таким образом)


# GOLOS

В папке golos располагается бот для блокчейна Golos

## About

Основная функция бота это автоклейминг дивидендов ваших аккаунтов на единый тип баланс. Далее в групповых чатах где добавлен бот вы можете донатить участников подключеных (если нет, то в боте бесплатная регистрация) посредством ответа на его сообщения либо плюсиками (до пяти штук) где каждый плюсик это 1% от вашего текущего тип-баланса, либо осуществить прямой донат ответом tipXXX где XXX целое число.

При этом если бот определит ссылку на пост на голосе (идентификаторы 'golos.in' 'golos.id' 'golos.today'), то донат уйдет не автору комментария, а автору поста.

Так же если есть сторонняя ссылка и кто-то оставил свою голосовую метку (GOLOS:login где login - это ваш аккаунт на голосе), то бот так же отправит донат не автору поста, а владельцу метки на стороннем ресурсе (к примеру youtube).

При желании вы можете отключить отчеты бота по донатам и клеймам.

Для того чтобы начать донатить в чате - введите команду /golos+
Если вы хотите отключиться, то /golos-

## Installation

Необходимые библиотеки для работы бота:
https://github.com/ksantoprotein/thallid-golos.git
https://github.com/ksantoprotein/thallid-tg.git

Их нужно установить, а папку golos скачать

### Редактируем файл storage.py

![](https://i.imgur.com/temS11R.png)
переменной token присваиваем токен вашего бота который вы получаете у @BotFather

maska - любая текстовая строка позволяющая вам просто визуально идентифицировать какой бот работает

в golos_reg указываете необходимое для регистрации новых пользователей, так указываете аккаунт бота на блокчейне GOLOS (account) и указываете приватный активный ключ (wif) необходимые для региcтрации. В поле fee вводите значение ликвидных токенов которые перепадают новичку а так же его долг вам по реферальной программе.

Перед запуском bot.py отредактируйте help

![](https://i.imgur.com/QqPPyAo.png)

вместо моих msg укажите ссылки на ваши посты с описанием как регаться в боте и о чем в целом бот и для чего.

Далее запускаете файл bot.py и если все корректно начнется работа.


# VIZ

В папке viz располагается бот для блокчейна Viz

## About

Основная функция бота это точечные аварды за активность в телеграмме. В групповых чатах где добавлен бот вы можете донатить участников подключеных (если нет, то в боте бесплатная регистрация) посредством ответа на его сообщения либо плюсиками (до пяти штук) где каждый плюсик это 1% от вашего текущего тип-баланса, либо осуществить прямой донат ответом vizXXX где XXX целое число. Исходя из вашей батарейки бот рассчитает примерный авард, чтобы в шарес реципиента добавилась указанная сумма.

Если в сообщении есть сторонняя ссылка и кто-то оставил свою метку визионера (VIZ:login где login - это ваш аккаунт на голосе), то бот так же отправит донат не автору сообщения, а владельцу метки на стороннем ресурсе (к примеру youtube).

При желании вы можете отключить отчеты бота по донатам.

Для того чтобы начать донатить в чате - введите команду /viz+
Если вы хотите отключиться, то /viz-


## Installation

Необходимые библиотеки для работы бота:
https://github.com/ksantoprotein/thallid-viz.git
https://github.com/ksantoprotein/thallid-tg.git

Их нужно установить, а папку viz скачать

### Редактируем файл storage.py

![](https://i.imgur.com/CgmO6sB.png)

переменной token присваиваем токен вашего бота который вы получаете у @BotFather

maska - любая текстовая строка позволяющая вам просто визуально идентифицировать какой бот работает

в viz_reg указываете необходимое для регистрации новых пользователей, так указываете аккаунт бота на блокчейне VIZ (account) и указываете приватный активный ключ (wif) необходимые для региcтрации. Бот регистрирует аккаунт путем делегирования и тут же отзывает, поэтому новичок получит нулевой аккаунт.

Перед запуском bot.py отредактируйте help

вместо моих msg укажите ссылки на ваши посты с описанием как регаться в боте и о чем в целом бот и для чего.

Далее запускаете файл bot.py и если все корректно начнется работа.
